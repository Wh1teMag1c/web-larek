
# Web-ларёк
### Автор: Барташевский Дмитрий Дмитриевич

### Описание
Интернет-магазин с товарами для веб-разработчиков. В нём можно посмотреть каталог товаров, добавить товары в корзину и делать заказы.

### Стек технологий:
    - HTML
    - SCSS
    - TypeScript
    - Webpack

### Инструкция по сборке и запуску
После клонирования репозитория установите зависимости:
```sh
npm install
```

Для запуска проекта в режиме разработки выполните команду:
```sh
npm run start
```
Затем откройте браузер и перейдите по адресу `http://localhost:8080`

### Архитектура
Проект построен на архитектурном принципе MVP (Model-View-Presenter), который обеспечивает чёткое разделение обязанностей между компонентами:

Model — отвечает за загрузку данных через API, их хранение и обработку пользовательских данных.

View — обеспечивает отображение интерфейса и взаимодействие с пользователем, а также фиксирует события.

EventEmitter — выполняет роль Presenter, связывая Model и View. Он управляет взаимодействием между ними при возникновении событий.

### Структура проекта
```
src/                  # Исходные файлы проекта
├── components/       # Папка с JS-компонентами
│   └── base/         # Базовые классы
├── pages/
│   └── index.html    # HTML-файл главной страницы
├── styles/
│   └── styles.scss   # Корневой файл стилей
├── types/
│   └── types.ts      # Файл с типами данных
├── utils/
│   ├── constants.ts  # Файл с константами
│   └── utils.ts      # Файл с утилитами
└── index.ts          # Точка входа приложения
```

### Ключевые файлы:
- src/pages/index.html — главная страница
- src/types/index.ts — типы данных
- src/index.ts — точка входа в приложение
- src/styles/styles.scss — основные стили
- src/utils/constants.ts — константы
- src/utils/utils.ts — вспомогательные функции

## Программный интерфейс компонентов

### Model (Модель)
Модель ответственна за взаимодействие с данными. Она получает информацию с сервера и передаёт её View для отображения. Каждая модель представляет собой независимый компонент, который может использовать данные и обновлять их по мере необходимости.

- **ApiModel**: Унаследован от класса `Api` и взаимодействует с сервером, получает список товаров и отправляет заказы.
- **BasketModel**: Управляет состоянием корзины покупок, такими как количество товаров, общая стоимость и добавление/удаление товаров.
- **FormModel**: Работает с пользовательскими данными для обработки заказов (адрес, контактные данные и способ оплаты).

### View (Представление)
Представление отвечает за отображение данных и взаимодействие с пользователем. Компоненты View получают данные от Model и представляют их на интерфейсе.

- **Basket**: Отображает корзину покупок, включая количество товаров и их общую стоимость.
- **Card**: Отображает карточки товаров, включая категорию и цену.
- **Order**: Отображает содержимое модальных окон для оформления заказа и выбора способа оплаты.

### EventEmitter (Посредник событий)
Класс, реализующий паттерн "Observer". Он управляет событиями между Model и View. Это обеспечивает связь между различными компонентами без их жёсткой связи.

Методы:
- `on` - для подписки на событие.
- `off` - для отписки от события.
- `emit` - уведомления подписчиков о наступлении события соответственно.
- `onAll` - для подписки на все события.
- `offAll` - сброса всех подписчиков.
- `trigger` - генерирует заданное событие с заданными аргументами. Это позволяет передавать его в качестве обработчика события в другие классы. Эти классы будут генерировать события, не будучи при этом напрямую зависимыми от класса `EventEmitter`.

## Типы данных, с которыми работает приложение

### Описание типов данных

### 1. `IProductItem`
Этот интерфейс описывает элемент продукта, который будет отображаться в приложении. Он включает в себя следующую информацию:
- **id** (string): Уникальный идентификатор продукта.
- **description** (string): Описание продукта.
- **image** (string): URL-адрес изображения продукта.
- **title** (string): Название продукта.
- **category** (string): Категория продукта.
- **price** (number | null): Цена продукта. Может быть `null`, если цена отсутствует.

### 2. `IActions`
Этот интерфейс используется для описания обработчика событий, который выполняется при клике:
- **onClick** (function): Функция, которая будет вызвана при событии клика. Принимает объект `MouseEvent`.

### 3. `IOrderForm`
Интерфейс, описывающий форму заказа. Включает данные, которые пользователь должен заполнить при оформлении заказа:
- **payment** (string, optional): Способ оплаты.
- **address** (string, optional): Адрес доставки.
- **phone** (string, optional): Номер телефона.
- **email** (string, optional): Адрес электронной почты.
- **total** (string | number, optional): Общая стоимость заказа, может быть строкой или числом.

### 4. `IOrder`
Этот интерфейс расширяет `IOrderForm` и добавляет информацию о товарах, включённых в заказ:
- **items** (string[]): Массив идентификаторов продуктов, которые были выбраны пользователем.

### 5. `IOrderLot`
Интерфейс для представления деталей заказа для оформления покупки. Включает в себя:
- **payment** (string): Способ оплаты.
- **email** (string): Электронная почта пользователя.
- **phone** (string): Номер телефона пользователя.
- **address** (string): Адрес доставки.
- **total** (number): Общая стоимость заказа.
- **items** (string[]): Массив идентификаторов товаров, которые включены в заказ.

### 6. `IOrderResult`
Интерфейс для представления результата оформления заказа:
- **id** (string): Уникальный идентификатор заказа.
- **total** (number): Общая сумма заказа.

### 7. `FormErrors`
Тип для хранения ошибок формы. Это частичное отображение, где ключами являются поля интерфейса `IOrder`, а значениями — сообщения об ошибках:
- **Partial<Record<keyof IOrder, string>>**: Отображение каждого поля формы (например, `payment`, `address`, `phone`, и т. д.) в строку ошибки.

